<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Set Your Password - CipherVault</title>
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <link rel="icon" type="image/svg+xml" href="{{ url_for('static', filename='favicon.svg') }}">
  <link rel="alternate icon" href="{{ url_for('static', filename='favicon.svg') }}" type="image/svg+xml">
  <script src="/static/js/setPasswordScript.js" defer></script>
  <script src="https://cdn.tailwindcss.com"></script>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <style>
    :root {
      --primary: #0F172A;
      --secondary: #1E293B;
      --accent: #3B82F6;
      --accent-hover: #2563EB;
      --success: #10B981;
      --danger: #EF4444;
      --text-primary: #0F172A;
      --text-secondary: #64748B;
      --bg-primary: #F8FAFC;
      --bg-secondary: #FFFFFF;
      --border: #E2E8F0;
    }
    
    [data-theme="dark"] {
      --primary: #F8FAFC;
      --secondary: #E2E8F0;
      --accent: #60A5FA;
      --accent-hover: #3B82F6;
      --success: #34D399;
      --danger: #F87171;
      --text-primary: #F8FAFC;
      --text-secondary: #94A3B8;
      --bg-primary: #0F172A;
      --bg-secondary: #1E293B;
      --border: #334155;
    }
    
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
      transition: background-color 0.3s ease, color 0.3s ease, border-color 0.3s ease;
    }
    
    body {
      font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
      background: var(--bg-primary);
      min-height: 100vh;
      display: flex;
      align-items: center;
      justify-content: center;
    }
    
    .modern-input {
      background: var(--bg-primary);
      border: 2px solid var(--border);
      color: var(--text-primary);
      transition: all 0.3s ease;
    }
    
    .modern-input:focus {
      border-color: var(--accent);
      box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.1);
      outline: none;
    }
    
    .btn-primary {
      background: var(--accent);
      color: white;
      transition: all 0.3s ease;
    }
    
    .btn-primary:hover {
      background: var(--accent-hover);
      transform: translateY(-2px);
      box-shadow: 0 10px 25px rgba(59, 130, 246, 0.3);
    }
    
    .strength-bar {
      height: 4px;
      border-radius: 2px;
      transition: all 0.3s ease;
      background: var(--border);
    }
    
    .text-primary {
      color: var(--text-primary);
    }
    
    .text-secondary {
      color: var(--text-secondary);
    }
  </style>
</head>
<body data-theme="light">
  <div class="container mx-auto px-4">
    <div class="max-w-md mx-auto">
      <!-- Card -->
      <div class="rounded-2xl shadow-2xl p-8" style="background: var(--bg-secondary); border: 1px solid var(--border);">
        
        <!-- Header -->
        <div class="text-center mb-8">
          <div class="w-20 h-20 rounded-full mx-auto mb-4 flex items-center justify-center" style="background: linear-gradient(135deg, #3B82F6, #8B5CF6);">
            <i class="fas fa-key text-white text-3xl"></i>
          </div>
          <h1 class="text-3xl font-bold text-primary mb-2">Set Your Password</h1>
          <p class="text-sm text-secondary">You're almost done! Create a secure password for your account</p>
        </div>
        
        <!-- Info Box -->
        <div class="mb-6 p-4 rounded-xl" style="background: rgba(59, 130, 246, 0.1); border: 1px solid rgba(59, 130, 246, 0.2);">
          <div class="flex items-start gap-3">
            <i class="fas fa-info-circle text-blue-500 mt-0.5"></i>
            <div class="text-sm" style="color: var(--text-primary);">
              <p class="font-semibold mb-2">Why do I need a password?</p>
              <p class="text-xs" style="color: var(--text-secondary);">Your password encrypts all stored credentials. You'll use it to add, import, and view passwords. Keep it secure!</p>
            </div>
          </div>
        </div>
        
        <!-- Alert Messages -->
        {% if error %}
        <div class="mb-4 p-4 rounded-xl flex items-center gap-3" style="background: rgba(239, 68, 68, 0.1); border: 1px solid rgba(239, 68, 68, 0.2);">
          <i class="fas fa-exclamation-circle text-red-500"></i>
          <span class="text-sm font-medium" style="color: #EF4444;">{{ error }}</span>
        </div>
        {% endif %}
        
        <!-- Form -->
        <form method="POST" action="/set_password" id="setPasswordForm" class="space-y-5">
          
          <!-- Password Input -->
          <div>
            <label class="block text-xs font-semibold mb-2 uppercase tracking-wide" style="color: var(--text-secondary);">Create Password</label>
            <div class="relative">
              <div class="absolute left-4 top-1/2 -translate-y-1/2" style="color: var(--text-secondary);">
                <i class="fas fa-lock"></i>
              </div>
              <input type="password" name="password" id="password" class="modern-input w-full rounded-xl pl-11 pr-12 py-3.5 text-sm" placeholder="Enter a strong password" required autofocus>
              <button type="button" id="togglePassword" class="absolute right-4 top-1/2 -translate-y-1/2" style="color: var(--text-secondary);">
                <i class="fas fa-eye"></i>
              </button>
            </div>
            
            <!-- Strength Indicator -->
            <div class="mt-3 space-y-2">
              <div class="flex gap-1.5">
                <div class="strength-bar flex-1 rounded-full" id="bar1"></div>
                <div class="strength-bar flex-1 rounded-full" id="bar2"></div>
                <div class="strength-bar flex-1 rounded-full" id="bar3"></div>
                <div class="strength-bar flex-1 rounded-full" id="bar4"></div>
              </div>
              <p id="strengthText" class="text-xs text-secondary ml-1">Password strength: <span id="strengthLabel">Not set</span></p>
            </div>
          </div>
          
          <!-- Confirm Password Input -->
          <div>
            <label class="block text-xs font-semibold mb-2 uppercase tracking-wide" style="color: var(--text-secondary);">Confirm Password</label>
            <div class="relative">
              <div class="absolute left-4 top-1/2 -translate-y-1/2" style="color: var(--text-secondary);">
                <i class="fas fa-lock"></i>
              </div>
              <input type="password" name="confirm_password" id="confirmPassword" class="modern-input w-full rounded-xl pl-11 pr-12 py-3.5 text-sm" placeholder="Re-enter your password" required>
              <button type="button" id="toggleConfirm" class="absolute right-4 top-1/2 -translate-y-1/2" style="color: var(--text-secondary);">
                <i class="fas fa-eye"></i>
              </button>
            </div>
          </div>
          
          <!-- Requirements -->
          <div class="p-4 rounded-xl" style="background: var(--bg-primary); border: 1px solid var(--border);">
            <p class="text-xs font-semibold mb-2" style="color: var(--text-primary);">Password Requirements:</p>
            <ul class="space-y-1 text-xs" style="color: var(--text-secondary);">
              <li id="req-length" class="flex items-center gap-2">
                <i class="fas fa-circle text-gray-300" style="font-size: 6px;"></i>
                <span>At least 8 characters</span>
              </li>
              <li id="req-uppercase" class="flex items-center gap-2">
                <i class="fas fa-circle text-gray-300" style="font-size: 6px;"></i>
                <span>One uppercase letter</span>
              </li>
              <li id="req-lowercase" class="flex items-center gap-2">
                <i class="fas fa-circle text-gray-300" style="font-size: 6px;"></i>
                <span>One lowercase letter</span>
              </li>
              <li id="req-number" class="flex items-center gap-2">
                <i class="fas fa-circle text-gray-300" style="font-size: 6px;"></i>
                <span>One number</span>
              </li>
              <li id="req-special" class="flex items-center gap-2">
                <i class="fas fa-circle text-gray-300" style="font-size: 6px;"></i>
                <span>One special character (!@#$%^&*)</span>
              </li>
            </ul>
          </div>
          
          <!-- Submit Button -->
          <button type="submit" class="btn-primary w-full rounded-xl font-semibold text-sm py-4 shadow-lg flex items-center justify-center gap-2">
            <i class="fas fa-check-circle"></i>
            <span>Set Password & Continue</span>
          </button>
          
        </form>
        
        <!-- Security Note -->
        <div class="mt-6 text-center">
          <p class="text-xs flex items-center justify-center gap-2" style="color: var(--text-secondary);">
            <i class="fas fa-shield-halved"></i>
            <span>Your password encrypts all data with AES-256</span>
          </p>
        </div>
        
      </div>
    </div>
  </div>
  
  
</body>
</html>
